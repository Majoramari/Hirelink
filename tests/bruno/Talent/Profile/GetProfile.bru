meta {
  name: GetProfile
  type: http
  seq: 4
}

get {
  url: {{base_url}}/talent/profile
  body: none
  auth: inherit
}

headers {
  Authorization: Bearer {{talent_access_token}}
}

script:post-response {
  const profile = res.body?.data?.talentProfile;
  if (!profile) {
    throw new Error("Expected response to include data.talentProfile");
  }
  const certificates = profile.certificates;
  if (!Array.isArray(certificates)) {
    throw new Error("Expected data.talentProfile.certificates to be an array");
  }
}

settings {
  encodeUrl: true
  timeout: 0
}
