meta {
  name: CreateJob
  type: http
  seq: 1
}

post {
  url: {{base_url}}/employer/jobs
  body: json
  auth: inherit
}

headers {
  Authorization: Bearer {{employer_access_token}}
}

body:json {
  {
    "title": "Backend Engineer",
    "description": "Build APIs",
    "location": "Remote",
    "jobType": "FULL_TIME",
    "experienceLevel": "FRESH",
    "salary": 2000,
    "requiredSkills": [
      {
        "name": "Node.js",
        "required": true
      }
    ],
    "requiredLanguages": [
      {
        "name": "English",
        "minimumProficiency": "BASIC",
        "required": true
      }
    ]
  }
}

script:post-response {
  const jobId = res.body?.data?.id;
  if (jobId) {
    bru.setEnvVar("job_id", jobId);
  }
}

settings {
  encodeUrl: true
  timeout: 0
}
